{% extends "base.html" %}

{% block banner %}

<!-- Carousel
 ================================================== -->
<div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
        {% set active_link = 1 %}
        {% for item in CAROUSELITEMS%}
        
        <div class="item {% if active_link %} active {% set active_link = 0 %} {% endif %}">
            {% if item['image'] %}
            <img src={{ SITEURL }}/{{ item['image'] }} alt="">
            {% endif %}
                <div class="container">
                    <div class="carousel-caption">
                        {% if item['headline'] %}
                        <h1> {{ item['headline'] }} </h1>
                        {% endif %}
                        {% if item['subtitle'] %}
                        <p class="lead">{{item['subtitle']}}</p>
                        {% endif %}
                        {% if item['buttonLink'] %}
                        <a class="btn btn-large btn-primary" href={{ SITEURL }}/{{item['buttonLink']}}>{{item['buttonCaption']}}</a>
                        {% endif %}
                    </div>
                </div>
                </div>
        {% endfor %}
    </div>
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div><!-- /.carousel -->

{% endblock %}
{% block content %}
 <script src="{{ SITEURL }}/theme/js/jquery.js"></script>
<script type="text/javascript">
/* Copyright (c) 2013 by Joseph Pan (http://hahack.com) */

function videoGFW(src) {
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
var request = new XMLHttpRequest();
}
else
{// code for IE6, IE5
var request = new ActiveXObject("Microsoft.XMLHTTP");
}
request.open('GET', 'http://freegeoip.net/xml');
request.onreadystatechange = function() {
if (request.readyState == 4 && request.status == 200) {
var xmlDoc = request.responseXML;
var root = xmlDoc.documentElement;
var element = root.getElementsByTagName("CountryName");
var country = element[0].firstChild.nodeValue;
if (country != "China"){
chooseVideo(src);
}
}
}
request.send(null);
}

function chooseVideo(src)
{
var video = '<iframe id="embededvideo" width=100% height=498 src=' + src + ' frameborder=0 allowfullscreen></iframe>';
$("#embededvideo").remove();
$("#videogfw").append(video);
}
</script>

<div id="videogfw">
    <script type="text/javascript">
        var default_src = "//www.youtube.com/embed/mT-2Ur6-tnc"
        var alternate_src = "http://player.youku.com/embed/XNjM2NTgxNjA4"
        chooseVideo(alternate_src);  // the default video source you wanna play
    
        videoGFW(default_src);  // uncomment this if you want it automatically
        // select the video source according to ip address
    </script>
</div>
{% endblock %}
